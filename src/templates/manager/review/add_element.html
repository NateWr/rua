{% extends "base.html" %}
{% load static from staticfiles %}
{% load bootstrap3 %}

{% block breadcrumbs %}
  <ol class="breadcrumb">
    <li><a href="{% url 'manager_index' %}">Manager</a></li>
    <li><a href="{% url 'manager_roles' %}">Roles</a></li>
    <li><a href="{% url 'manager_role' role.slug %}" class="active">{{ role.name }}</a></li>
	</ol>
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css">
{% endblock css %}

{% block body %}
	<div class="col-md-12">
		<h2>{{ role.name }}</h2>
    <h4>Users without this role</h4>
    <table class="table table-condensed" cellspacing="0" width="100%" id='users-without'>
      <thead>
      <tr>
        <th width="25%">First Name</th>
        <th width="25%">Last Name</th>
        <th width="30%">Email</th>
        <th width="20%"></th>
      </tr>
      </thead>
      {% for user in users %}
      <tr>
        <td>{{ user.first_name }}</td>
        <td>{{ user.last_name }}</td>
        <td>{{ user.email }}</td>
        <td><a href="{% url 'manager_role_action' role.slug user.id 'add' %}">Add Role</a></td>
      </tr>
      {% endfor %}
    </table>
    <hr />
    <h4>Users with this role</h4>
    <table class="table table-condensed" cellspacing="0" width="100%" id='users-with'>
      <thead>
      <tr>
        <th width="25%">First Name</th>
        <th width="25%">Last Name</th>
        <th width="30%">Email</th>
        <th width="20%"></th>
      </tr>
      </thead>
      {% for user in users_with_role %}
      <tr>
        <td>{{ user.first_name }}</td>
        <td>{{ user.last_name }}</td>
        <td>{{ user.email }}</td>
        <td><a href="{% url 'manager_role_action' role.slug user.id 'remove' %}">Remove Role</a></td>
      </tr>
      {% endfor %}
    </table>
  </div>
{% endblock body %}


{% block js %}
<script type="text/javascript" language="javascript" src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" language="javascript" src="//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js"></script>
<script>
  $(document).ready(function() {
      $('#users-without').DataTable({
        "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]]
      });
  } );

  $(document).ready(function() {
      $('#users-with').DataTable({
        "lengthMenu": [[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"]]
      });
  } );
</script>


{% endblock js %}
